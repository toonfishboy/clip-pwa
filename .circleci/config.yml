version: 2.1

jobs:
  lint_test_build:
    docker:
      - image: node:18
    working_directory: ~/project
    steps:
      - checkout
      - run:
          command: curl -fsSL "https://github.com/pnpm/pnpm/releases/latest/download/pnpm-linuxstatic-x64" -o /bin/pnpm; chmod +x /bin/pnpm;
          name: Instal pnpm
      - run:
          command: pnpm install
          name: Install packages
      - run:
          command: |
            pnpm run lint
          name: Lint
      - run:
          command: |
            pnpm run test:ci
          name: Test
      - run:
          command: |
            pnpm run build
          name: Build application

workflows:
  version: 2
  clip-build:
    jobs:
      - lint_test_build
